<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Task 20</title>
  </head>
  <style>
  .queue-ul{
  	height: 100px;
  }
  .queue-li{
  	    list-style: none;
    display: inline-block;
    width: 50px;
    height: 30px;
    background-color: #AD7676;
    margin: 5px 10px;
  }

  </style>
<body>

 <div>
    <label>输入待插入数字：<textarea id="num-input" type="text"></textarea> </label><br>
	<button id="leftIn-btn" class="in left">左侧入</button>
	<button id="rightIn-btn" class="in right">右侧入</button>
	<button id="leftOut-btn" class="out left">左侧出</button>
	<button id="rightOut-btn" class="out right">右侧出</button>
  </div>
  <ul id="queue-ul" class="queue-ul"> 
  </ul>
  <div >
  	<label> 输入查询字符串：<input id="search"></label>
  	<button id="search-btn">查询</button>
  </div>

<script type="text/javascript">
//跨浏览器事件处理
var EventUtil={
	addHandler:function(element,type,handler){
		if(element.addEventListener){
			element.addEventListener(type,handler,false);
		}else if(element.attchEvent){
			element.attchEvent("on"+type,handler);
		}else{
			element["on"+type]=handler;
		}
	}
}


var queueData=[];

//输入数字验证
function dealData(value){
	var arr=[];
	if(!value){
		alert("不能为空");
	}else{
		arr=value.split(/[^0-9a-zA-Z\u4e00-\u9fa5]+/);
	}
	console.log(arr);
	return arr;
}

// 渲染队列
function renderQueue(){
	//alert(queueData);
	
	var str="";
	for(var i=0,len=queueData.length;i<len;i++){
		str+="<li class='queue-li'>"+queueData[i]+"</li>";
	}
	document.getElementById("queue-ul").innerHTML=str;

}

//渲染队列数据
function renderQueueData(btnCla,arr){
	if(arr){
		var len=arr.length;
	}
	if(btnCla[0]=="in"&&btnCla[1]=="left"){
		for(var i=0;i<len;i++){
			queueData.splice(0,0,arr[i]);
		}
		
	}else if(btnCla[0]=="in"&&btnCla[1]=="right"){
		for(var i=0;i<len;i++){
			queueData.push(arr[i]);
		}
	}else if(btnCla[0]=="out"&&btnCla[1]=="left"){
		queueData.splice(0,1);
	}else if(btnCla[0]=="out"&&btnCla[1]=="right"){
		queueData.splice(queueData.length-1,1);
	}
	renderQueue();

}


var btns=document.getElementsByTagName("button");
for(var i=0,len=btns.length ;i<len;i++){
	EventUtil.addHandler(btns[i],'click',function(){
		var btnClass=this.classList;//html5,classList
		var inputValue=document.getElementById("num-input").value;
		var inputArr=dealData(inputValue);
		renderQueueData(btnClass,inputArr);
	});
}



var searchBtn=document.getElementById("search-btn");
EventUtil.addHandler(searchBtn,'click',function(){
	var searchValue=document.getElementById("search").value;
	if(searchValue){
		var patt=new RegExp(searchValue);
		var dataLi=document.getElementById("queue-ul").childNodes;
		for(var i=0,len=queueData.length;i<len;i++){
			if(patt.test(queueData[i])){
				dataLi[i].style.background="yellow";
			}
		}
	}
});



</script>
</body>
</html>